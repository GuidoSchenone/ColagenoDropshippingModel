<!DOCTYPE html>
<html lang="{{ request.locale.iso_code }}">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ page_title }}{% unless page_title contains shop.name %} – {{ shop.name }}{% endunless %}</title>
  <meta name="description" content="{{ page_description | escape }}">
  <link rel="canonical" href="{{ canonical_url }}">
  <meta name="theme-color" content="#ffffff">

  {# Open Graph + Twitter Card #}
  <meta property="og:site_name" content="{{ shop.name }}">
  <meta property="og:url" content="{{ canonical_url }}">
  <meta property="og:title" content="{{ page_title }}">
  <meta property="og:description" content="{{ page_description | escape }}">
  {%- assign og_image = product.featured_media | default: collection.image | default: shop.brand.logo -%}
  {%- if og_image -%}
    <meta property="og:image" content="{{ og_image | image_url: width: 1200 }}">
    <meta property="twitter:card" content="summary_large_image">
  {%- endif -%}

  {{ content_for_header }}  {# REQUIRED BY SHOPIFY #}

  {# CSS critical path #}
  {{ 'tailwind.css' | asset_url | stylesheet_tag }}
  {{ 'theme.css'  | asset_url | stylesheet_tag }}

  {# Fonts #}
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer">

  <style>
    :root{
      --color-primary:#8e2de2;
      --color-secondary:#4a00e0;
      --color-accent:#f59e0b;
      --font-body:'Inter',sans-serif;
    }
    body{font-family:var(--font-body);}
    .nutrivet-gradient{background:linear-gradient(90deg,var(--color-primary),var(--color-secondary))}
  </style>

  <script>document.documentElement.classList.add('js');</script>
</head>

<body class="bg-gray-50 text-gray-900 antialiased">
  <a class="sr-only focus:not-sr-only" href="#MainContent">{{ 'general.accessibility.skip_to_content' | t }}</a>

  <header class="bg-white shadow-sm sticky top-0 z-40">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center space-x-4">
          <a href="{{ routes.root_url }}" class="flex items-center space-x-2">
            <div class="w-10 h-10 nutrivet-gradient rounded-lg flex items-center justify-center">
              <i class="fas fa-paw text-white text-xl"></i>
            </div>
            <div>
              <h1 class="text-xl font-bold text-gray-900">{{ shop.name }}</h1>
              <p class="text-xs text-gray-500">SALUD INTEGRAL PARA PERROS</p>
            </div>
          </a>
        </div>

        {%- if linklists['main-menu'].links.size > 0 -%}
          <nav class="hidden md:flex items-center space-x-6" aria-label="Principal">
            {%- for link in linklists['main-menu'].links -%}
              <a href="{{ link.url }}" class="text-gray-700 hover:text-gray-900 font-medium">{{ link.title }}</a>
            {%- endfor -%}
          </nav>
        {%- endif -%}

        <div class="flex items-center space-x-4">
          <a href="{{ routes.search_url }}" class="text-gray-600 hover:text-gray-900" aria-label="Buscar">
            <i class="fas fa-search text-lg"></i>
          </a>
          <a href="{{ routes.cart_url }}" class="text-gray-600 hover:text-gray-900 relative" aria-label="Carrito">
            <i class="fas fa-shopping-cart text-lg"></i>
            {%- assign items = cart.items | size -%}
            <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center {% if items == 0 %}hidden{% endif %}">
              {{ items }}
            </span>
          </a>
        </div>
      </div>
    </div>
  </header>

  <main role="main" id="MainContent">
    {{ content_for_layout }}  {# REQUIRED BY SHOPIFY #}
  </main>

  <footer class="bg-gray-900 text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <div class="flex items-center space-x-3 mb-4">
            <div class="w-10 h-10 nutrivet-gradient rounded-lg flex items-center justify-center">
              <i class="fas fa-paw text-white"></i>
            </div>
            <h3 class="text-xl font-bold">{{ shop.name }}</h3>
          </div>
          <p class="text-gray-400 text-sm">Salud integral para perros con fórmulas veterinarias de alta calidad.</p>
        </div>

        <div>
          <h4 class="font-semibold mb-4">Productos</h4>
          <ul class="space-y-2 text-gray-400 text-sm">
            <li><a href="{{ routes.all_products_collection_url }}" class="hover:text-white">Multivitamínicos</a></li>
            <li><a href="{{ routes.all_products_collection_url }}" class="hover:text-white">Probióticos</a></li>
            <li><a href="{{ routes.all_products_collection_url }}" class="hover:text-white">Suplementos</a></li>
            <li><a href="{{ routes.all_products_collection_url }}" class="hover:text-white">Cuidado Dental</a></li>
          </ul>
        </div>

        <div>
          <h4 class="font-semibold mb-4">Soporte</h4>
          <ul class="space-y-2 text-gray-400 text-sm">
            {%- assign faq_page = pages['faq'] -%}
            <li><a href="{{ faq_page.url }}" class="hover:text-white">Preguntas Frecuentes</a></li>
            <li><a href="{{ routes.root_url }}pages/shipping" class="hover:text-white">Envíos y Devoluciones</a></li>
            <li><a href="{{ routes.root_url }}pages/guarantee" class="hover:text-white">Garantía</a></li>
            <li><a href="{{ routes.root_url }}pages/contact" class="hover:text-white">Contacto</a></li>
          </ul>
        </div>

        <div>
          <h4 class="font-semibold mb-4">Conecta con Nosotros</h4>
          <div class="flex space-x-4 mb-4">
            <a href="#" class="text-gray-400 hover:text-white" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="text-gray-400 hover:text-white" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="#" class="text-gray-400 hover:text-white" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
            <a href="#" class="text-gray-400 hover:text-white" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
          </div>
          <p class="text-gray-400 text-sm">
            {%- if shop.email != blank -%}
              <i class="fas fa-envelope mr-2"></i>{{ shop.email }}<br>
            {%- endif -%}
            <i class="fas fa-phone mr-2"></i>1-800-NUTRIVET
          </p>
        </div>
      </div>

      <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400 text-sm">
        <p>&copy; {{ 'now' | date: '%Y' }} {{ shop.name }} – CIENCIA VETERINARIA DE CALIDAD</p>
        <p class="mt-2">Hecho en Argentina | Producto veterinario registrado</p>
      </div>
    </div>
  </footer>

  {# JS deferred #}
  <script src="{{ 'theme.js' | asset_url }}" defer></script>
  <script src="{{ 'lazysizes.min.js' | asset_url }}" defer></script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const cartCount = document.getElementById('cart-count');
      if (!cartCount) return;
      const count = {{ cart.item_count | json }};
      cartCount.classList.toggle('hidden', count === 0);
      cartCount.textContent = count;
    });
  </script>
</body>
</html>