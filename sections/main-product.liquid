<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- Gallery -->
    <div class="space-y-4">
      <div class="bg-white rounded-2xl shadow-lg p-4 md:p-6">
        <div class="aspect-square bg-gray-100 rounded-xl overflow-hidden relative">
          <img id="main-image" src="https://cdn.shopify.com/s/files/1/0759/6962/6309/files/landing-product-browser1.png?v=1768590451" alt="{{ product.title }}" class="w-full h-full object-contain">
        </div>
      </div>
      <div class="grid grid-cols-4 gap-2">
        <!-- Thumbnails -->
        <div class="thumbnail aspect-square bg-white rounded-lg shadow flex items-center justify-center cursor-pointer border-2 border-gray-200 hover:border-purple-300 overflow-hidden" onclick="changeMainImage('https://cdn.shopify.com/s/files/1/0759/6962/6309/files/landing-product-browser1.png?v=1768590451', this)">
          <img src="https://cdn.shopify.com/s/files/1/0759/6962/6309/files/landing-product-browser1.png?v=1768590451" alt="Product main view" class="w-full h-full object-contain">
        </div>
        <div class="thumbnail aspect-square bg-white rounded-lg shadow flex items-center justify-center cursor-pointer border-2 border-gray-200 hover:border-purple-300 overflow-hidden" onclick="changeMainImage('https://cdn.shopify.com/s/files/1/0759/6962/6309/files/landing-product-browser2.png?v=1768590453', this)">
          <img src="https://cdn.shopify.com/s/files/1/0759/6962/6309/files/landing-product-browser2.png?v=1768590453" alt="Product detail view" class="w-full h-full object-contain">
        </div>
        <div class="thumbnail aspect-square bg-white rounded-lg shadow flex items-center justify-center cursor-pointer border-2 border-gray-200 hover:border-purple-300 overflow-hidden" onclick="changeMainImage('https://cdn.shopify.com/s/files/1/0759/6962/6309/files/landing-product-browser3.png?v=1768590450', this)">
          <img src="https://cdn.shopify.com/s/files/1/0759/6962/6309/files/landing-product-browser3.png?v=1768590450" alt="Product usage" class="w-full h-full object-contain">
        </div>
        <div class="thumbnail aspect-square bg-white rounded-lg shadow flex items-center justify-center cursor-pointer border-2 border-gray-200 hover:border-purple-300 overflow-hidden" onclick="changeMainImage('https://cdn.shopify.com/s/files/1/0759/6962/6309/files/landing-product-browser4.png?v=1768590451', this)">
          <img src="https://cdn.shopify.com/s/files/1/0759/6962/6309/files/landing-product-browser4.png?v=1768590451" alt="Product packaging" class="w-full h-full object-contain">
        </div>
      </div>
    </div>

    <!-- Product Info -->
    <div class="space-y-6">
      <h1 class="text-3xl font-bold text-gray-900">{{ product.title }}</h1>
      {% render 'rating-stars', rating: product.metafields.reviews.rating, count: product.metafields.reviews.count %}
      {% render 'price-block', product: product %}

      <form method="post" action="/cart/add" id="product-form-{{ product.id }}" accept-charset="UTF-8" class="space-y-4">
        <input type="hidden" name="form_type" value="product">
        <input type="hidden" name="utf8" value="✓">
        {% render 'variant-selector', product: product %}

        <div class="flex items-center space-x-4">
          <label class="text-gray-700 font-medium">Cantidad:</label>
          <div class="flex items-center border rounded-lg">
            <button type="button" onclick="this.parentNode.querySelector('input[type=number]').stepDown()" class="px-3 py-2 hover:bg-gray-100"><i class="fas fa-minus"></i></button>
            <input type="number" name="quantity" value="1" min="1" class="px-4 py-2 w-16 text-center border-0">
            <button type="button" onclick="this.parentNode.querySelector('input[type=number]').stepUp()" class="px-3 py-2 hover:bg-gray-100"><i class="fas fa-plus"></i></button>
          </div>
        </div>

        <button type="submit" name="add" class="w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:opacity-90 transition shadow-lg hover:shadow-xl flex items-center justify-center">
          <i class="fas fa-shopping-cart mr-2"></i>AGREGAR AL CARRITO
        </button>
      </form>

      {% if section.settings.show_benefits_above %}
      <div class="bg-green-50 border border-green-200 p-4 rounded-xl">
        <ul class="space-y-2 text-sm text-green-800">
          {% for block in section.blocks %}
            {% if block.type == 'benefit' %}
            <li class="flex items-start"><i class="fas fa-check-circle mt-0.5 mr-2 text-green-600"></i><span>{{ block.settings.text }}</span></li>
            {% endif %}
          {% endfor %}
        </ul>
      </div>
      {% endif %}
    </div>
  </div>

  {% if section.settings.layout == 'tabs' %}
  <div class="mt-12">
    <div class="border-b border-gray-200 mb-6">
      <nav class="-mb-px flex space-x-8">
        <button class="tab-button active" onclick="openTab(event,'description')">Descripción</button>
        {% if section.settings.tab_nutrition %}<button class="tab-button" onclick="openTab(event,'nutrition')">Información Nutricional</button>{% endif %}
        <button class="tab-button" onclick="openTab(event,'reviews')">Reseñas</button>
      </nav>
    </div>
    <div id="description" class="tab-content block prose max-w-none">{{ product.description }}</div>
    <div id="nutrition" class="tab-content hidden prose max-w-none">{{ section.settings.nutrition_content }}</div>
    <div id="reviews" class="tab-content hidden">{% render 'product-reviews', product: product %}</div>
  </div>
  {% else %}
  <div class="mt-12 prose max-w-none">{{ product.description }}</div>
  {% endif %}
</div>

{% schema %}
{
  "name": "Main Product",
  "blocks": [
    {
      "type": "gallery_image",
      "name": "Gallery Image",
      "settings": [
        { "type": "text", "id": "image_url", "label": "Image URL" },
        { "type": "text", "id": "alt", "label": "Alt Text", "default": "Product image" }
      ]
    },
    {
      "type": "benefit",
      "name": "Benefit",
      "settings": [
        { "type": "text", "id": "text", "label": "Benefit Text" }
      ]
    }
  ],
  "settings": [
    { "type": "checkbox", "id": "show_benefits_above", "label": "Show benefits above cart", "default": false },
    { "type": "select", "id": "layout", "label": "Layout", "options": [{"value": "stacked", "label": "Stacked"}, {"value": "tabs", "label": "Tabs"}], "default": "stacked" },
    { "type": "checkbox", "id": "tab_nutrition", "label": "Show nutrition tab", "default": false },
    { "type": "richtext", "id": "nutrition_content", "label": "Nutrition content" }
  ],
  "presets": [{"name": "Main Product"}]
}
{% endschema %}
